(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1016:function(t,e,r){"use strict";r(848)},1017:function(t,e,r){var n=r(6)(!1);n.push([t.i,'@media (min-width:1024px){.mobile-only[data-v-9f33ceb8]{display:none!important}}@media (max-width:1023px){.desktop-only[data-v-9f33ceb8]{display:none!important}}@-webkit-keyframes spin-data-v-9f33ceb8{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin-data-v-9f33ceb8{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.request-page[data-v-9f33ceb8]{padding:32px 24px}h1[data-v-9f33ceb8]{margin-bottom:16px}.request-placeholders[data-v-9f33ceb8]{position:relative;overflow:hidden}.request-placeholders[data-v-9f33ceb8]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:70%;background:linear-gradient(0deg,#fff,hsla(0,0%,100%,0))}.request-list[data-v-9f33ceb8]{min-height:300px}.request-list[data-v-9f33ceb8] .infinite-scroller .preloader{height:120px}.request-list[data-v-9f33ceb8] .post+.post{margin-top:40px}.empty[data-v-9f33ceb8]{height:500px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.empty .empty-icon[data-v-9f33ceb8]{width:58px;height:58px;margin:0 auto 16px}.empty .empty-icon[data-v-9f33ceb8] svg{display:block}.empty .empty-title[data-v-9f33ceb8]{margin-bottom:8px;font-weight:600}.empty .empty-detail[data-v-9f33ceb8]{max-width:360px}',""]),t.exports=n},4054:function(t,e,r){"use strict";r.r(e);r(12),r(10),r(13),r(14);var n=r(20),o=r(32),c=r(5),h=r(0),d=(r(24),r(22),r(11),r(23),r(175),r(18),r(4)),l=r(788);r(43);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={name:"RequestIconSearchPage",layout:"request-icon",components:{requestSearch:function(){return r.e(71).then(r.bind(null,4074))},requestForm:function(){return r.e(64).then(r.bind(null,4075))},requestPost:function(){return r.e(68).then(r.bind(null,4076))},requestPlaceholder:function(){return r.e(67).then(r.bind(null,4077))}},data:function(){return{initialUser:!1,page:1,makersIsLoading:!1,pages:1,limit:15,query:"",sortBy:"-createdAt",filterBy:"all",total:0,initialEmpty:!1,searchNotfound:!1,loading:!1,loadingMore:!1,posts:[]}},computed:m(m(m({},Object(d.c)("request-icons",["getSorting"])),Object(d.e)({user:function(t){return t.auth.user},platforms:function(t){return t.appInfo.platforms},makers:function(t){return t["request-icons"].makers}})),{},{requestedPlatforms:function(){var t=this,e=["ultraviolet","dusk","Dusk_Wired","cotton","pastel_glyph","win10","win8","android"],r={};return Object.keys(this.platforms).map((function(n){e.includes(n)||(r[n]=t.platforms[n])})),r},makersList:function(){return this.makers&&this.makers.docs?this.getSorting():(this.fetchMakers(),[])}}),watch:{user:function(t){!this.posts.length||t.isGuest||this.initialUser&&t.loaded||(this.page=1,this.posts=[],this.fetchRequests(),this.fetchMakers())},query:function(t){if(0===t.length)return this.page=1,this.posts=[],void this.fetchRequests();this.searchHandler()}},asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,h,d,f,m,v,y,k,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.route,r=t.store,t.env,t.query,t.req,t.redirect,t.error,n=0,o=[],c=1,h=15,d=r.state["request-icons"].makers,f=!1,m=!1,v=r.state.auth.user.authToken,e.prev=10,e.next=13,l.a.fetchRequests({sort:"-createdAt",authToken:v,limit:h});case 13:if(y=e.sent,o=y.docs,n=y.total,c=y.pages,o.length||(m=!0),!v){e.next=30;break}if(d){e.next=30;break}return e.prev=20,k={authToken:v,limit:10,page:1},e.next=24,l.a.fetchMakers(k);case 24:w=e.sent,r.commit("request-icons/SET_MAKERS",w),e.next=30;break;case 28:e.prev=28,e.t0=e.catch(20);case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(10),console.error(e.t1);case 35:return r.dispatch("updateSEO",{title:"Request an icon | Icons8",description:"Request icons in your favourite style. Help us make our iconic world a better place."}),e.abrupt("return",{total:n,pages:c,limit:h,posts:o,initialEmpty:m,initialUser:f});case 37:case"end":return e.stop()}}),e,null,[[10,32],[20,28]])})))()},mounted:function(){var t=this;window.addEventListener("load",this.notify),this.searchHandler=this.$utils.debounce((function(){t.search()}),500)},beforeDestroy:function(){window.removeEventListener("load",this.notify)},methods:m(m({},Object(d.d)("request-icons",{setMakers:"SET_MAKERS"})),{},{notify:function(){void 0===localStorage.requestFirstVisit&&this.$notify({icon:this.$icons["request/thumbsUp"],title:"You can vote for the icons",text:"The requested icons with the most votes we draw first",delay:0,onCloseHandler:function(){localStorage.requestFirstVisit=Date.now()}})},loadMore:function(){!this.loadingMore&&this.page<this.pages&&(this.page+=1,this.fetchRequests())},fetchRequests:function(){var t=this;if(!this.loading&&!this.loadingMore){this.searchNotfound=!1;var e={sort:this.sortBy,page:this.page,limit:this.limit,term:this.query,authToken:this.user.authToken};"object"===Object(o.a)(this.filterBy)&&Object.assign(e,this.filterBy),1===this.page&&(this.loading=!0),this.page>1&&(this.loadingMore=!0),l.a.fetchRequests(e).then((function(e){t.total=e.total,t.pages=e.pages,t.$nextTick((function(){t.posts=[].concat(Object(n.a)(t.posts),Object(n.a)(e.docs))})),t.posts.length||(t.searchNotfound=!0)})).catch((function(t){return console.warn(t)})).finally((function(){t.loading=!1,t.loadingMore=!1}))}},fetchMakers:function(){var t=this;if(!this.makers||!this.makers.docs)return[];this.makers.page<this.makers.pages?(this.makersIsLoading=!0,l.a.fetchMakers({authToken:this.user.authToken,limit:10,page:++this.makers.page}).then((function(e){t.setMakers(e),t.makersIsLoading=!1})).catch((function(){t.makersIsLoading=!1}))):l.a.fetchMakers({authToken:this.user.authToken,limit:10,page:1}).then((function(e){t.setMakers(e),t.makersIsLoading=!1})).catch((function(){t.makersIsLoading=!1}))},updateVotes:function(t,e){e.votesCount=t},requestAdd:function(data){this.pages>1&&this.pages>this.page&&this.posts.pop(),this.posts.unshift(data)},search:function(){this.page=1,this.posts=[],this.sortBy="-createdAt",this.filterBy="all",this.fetchRequests()},sort:function(param){this.sortBy=param,this.page=1,this.posts=[],this.fetchRequests()},filter:function(param){this.page=1,this.posts=[],this.filterBy=param,this.fetchRequests()}})},y=(r(1016),r(1)),component=Object(y.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"request-page"},[r("div",{staticClass:"container"},[r("h1",[t._v("Icon Request")]),r("request-form",{attrs:{styles:t.requestedPlatforms,user:t.user},on:{"request:create":t.requestAdd}}),t.initialEmpty?t._e():r("request-search",{attrs:{user:t.user,makers:t.makersList},on:{"request:sort":t.sort,"request:filter":t.filter},model:{value:t.query,callback:function(e){t.query="string"==typeof e?e.trim():e},expression:"query"}}),r("div",{staticClass:"request-list"},[t.loading?[r("div",{staticClass:"request-placeholders"},t._l(5,(function(i){return r("request-placeholder",{key:i,attrs:{width:400,height:80}},[r("rect",{attrs:{x:"75",y:"20",rx:"4",ry:"4",width:"250",height:"8"}}),r("rect",{attrs:{x:"75",y:"35",rx:"4",ry:"4",width:"220",height:"8"}}),r("rect",{attrs:{x:"75",y:"50",rx:"4",ry:"4",width:"280",height:"8"}}),r("rect",{attrs:{x:"75",y:"0",rx:"6",ry:"6",width:"320",height:"12"}}),r("rect",{attrs:{x:"0",y:"0",rx:"6",ry:"6",width:"60",height:"65"}})])})),1)]:t.posts.length?[r("app-infinite-scroll",{attrs:{throttle:50,preloader:t.loadingMore},on:{infinite:t.loadMore}},t._l(t.posts,(function(e,n){return r("request-post",{key:n,attrs:{post:e,user:t.user,makers:t.makersList,"makers-is-loading":t.makersIsLoading,platforms:t.platforms},on:{"update:votes":function(r){return t.updateVotes(r,e)},"request:infiniteScroll":t.fetchMakers}})})),1)]:t.searchNotfound?[r("div",{staticClass:"empty"},[r("div",{staticClass:"empty-icon",domProps:{innerHTML:t._s(t.$icons["request/requestSad"])}}),r("div",{staticClass:"empty-title"},[t._v("No requests found")])])]:t.initialEmpty?[r("div",{staticClass:"empty"},[r("div",{staticClass:"empty-icon",domProps:{innerHTML:t._s(t.$icons["request/requestEmpty"])}}),r("div",{staticClass:"empty-title"},[t._v("There are no requests")]),r("div",{staticClass:"empty-detail"},[t._v("Here you can request icons that you haven't found. By the way, your request will be the first.")])])]:t._e()],2)],1)])}),[],!1,null,"9f33ceb8",null);e.default=component.exports},788:function(t,e,r){"use strict";r(18),r(16);var n=r(27),o=r.n(n).a.create({baseURL:"https://inceptum.icons8.com"});e.a={createRequest:function(t){var e,title=t.title,r=t.description,n=t.attachments,c=void 0===n?[]:n,h=t.platforms,d=void 0===h?[]:h,l=t.authToken,data={title:title,description:r,attachments:c,platforms:d};return l&&(e={Authorization:"Bearer ".concat(l)}),new Promise((function(t,r){o.request({url:"/api/requests",method:"put",data:data,headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(r)}))},fetchRequests:function(t){var e,r=t.sort,n=t.page,c=void 0===n?1:n,h=t.limit,d=void 0===h?15:h,l=t.isMine,f=void 0!==l&&l,m=t.isAssignedToMe,v=void 0!==m&&m,y=t.isUnassigned,k=void 0===y?null:y,w=t.isAssignedTo,x=void 0===w?null:w,T=t.status,M=void 0===T?null:T,O=t.term,P=void 0===O?null:O,j=t.authToken,R={sort:r,page:c,limit:d,type:"icon"};return f&&(R.isMine=f),v&&(R.isAssignedToMe=v),k&&(R.isUnassigned=k),x&&(R.isAssignedTo=x),M&&(R.status=M),P&&(R.term=P),j&&(e={Authorization:"Bearer ".concat(j)}),new Promise((function(t,r){o.request({url:"/api/requests",method:"get",params:R,headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(r)}))},fetchMakers:function(t){var e;return t.authToken&&(e={Authorization:"Bearer ".concat(t.authToken)}),new Promise((function(r,n){o.request({url:"/api/makers",method:"get",params:{limit:100,page:t.page},headers:e}).then((function(t){t.data.success&&r(t.data)})).catch(n)}))},fetchDetail:function(t){var e,r=t.id,n=t.authToken;return n&&(e={Authorization:"Bearer ".concat(n)}),new Promise((function(t,n){o.request({url:"/api/requests/".concat(r),method:"get",headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(n)}))},togglevote:function(t){var e,r=t.action,n=t.id,c=t.authToken;return c&&(e={Authorization:"Bearer ".concat(c)}),new Promise((function(t,c){o.request({url:"/api/requests/".concat(n,"/").concat(r),method:"post",headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(c)}))},assignMaker:function(t){var e,r=t.id,n=t.makerId,c=t.authToken;return c&&(e={Authorization:"Bearer ".concat(c)}),new Promise((function(t,c){o.request({url:"/api/requests/".concat(r,"/assignMaker"),method:"post",headers:e,data:{makerId:n}}).then((function(e){e.data.success&&t(e.data)})).catch(c)}))},takeToWork:function(t){var e,r=t.id,n=t.authToken;return n&&(e={Authorization:"Bearer ".concat(n)}),new Promise((function(t,n){o.request({url:"/api/requests/".concat(r,"/takeToWork"),method:"post",headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(n)}))},deleteRequest:function(t){var e,r=t.id,n=t.authToken;return n&&(e={Authorization:"Bearer ".concat(n)}),new Promise((function(t,n){o.request({url:"/api/requests/".concat(r),method:"delete",headers:e}).then((function(e){e.data.success&&t(e.data)})).catch(n)}))},resolveRequest:function(t){var e,r=t.resolvedItems,n=t.id,c=t.authToken;return c&&(e={Authorization:"Bearer ".concat(c)}),new Promise((function(t,c){o.request({url:"/api/requests/".concat(n,"/resolve"),method:"post",headers:e,data:{resolvedItems:r}}).then((function(e){e.data.success&&t(e.data)})).catch(c)}))},uploadFiles:function(t){var e=t.file,r=t.authToken,n={"Content-Type":"multipart/form-data"};r&&(n.Authorization="Bearer ".concat(r));var c=new FormData;return c.append("file",e,e.name),new Promise((function(t,e){o.request({url:"/api/uploadFiles",method:"post",headers:n,data:c}).then((function(e){e.data.success&&t(e.data)})).catch(e)}))}}},848:function(t,e,r){var content=r(1017);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(7).default)("377c1e4c",content,!0,{sourceMap:!1})}}]);
//# sourceMappingURL=index.f0dbd4645c84dee81054.js.map